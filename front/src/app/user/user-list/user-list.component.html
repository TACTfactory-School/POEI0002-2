<ng-template #loading><app-loader></app-loader></ng-template>

<section *ngIf="(users) as users; else loading">
  <table mat-table [dataSource]="users" class="mat-elevation-z8" *ngIf="users.length; else noData">

    <ng-container matColumnDef="username">
      <th mat-header-cell *matHeaderCellDef> Pseudo </th>
      <td mat-cell [routerLink]="[ user.id ]" *matCellDef="let user"> {{user.username}} </td>
    </ng-container>

    <ng-container matColumnDef="city">
      <th mat-header-cell *matHeaderCellDef> Ville </th>
      <td mat-cell [routerLink]="[ user.id ]" *matCellDef="let user"> {{user.city}} </td>
    </ng-container>

    <!-- Picture Column -->
    <ng-container matColumnDef="picture">
      <th mat-header-cell *matHeaderCellDef> Avatar </th>
      <td mat-cell  *matCellDef="let user"> <img src="assets/img/{{user.picture}}" style="width:85px"></td>
    </ng-container>

    <ng-container matColumnDef="profession">
      <th mat-header-cell *matHeaderCellDef > Profession </th>
      <td mat-cell [routerLink]="[ user.id ]" *matCellDef="let user"> {{ user.profession }}</td>
    </ng-container>

    <ng-container matColumnDef="detail">
      <th mat-header-cell *matHeaderCellDef> Profil </th>
      <td mat-cell *matCellDef="let user"><button mat-button [routerLink]="[ user.id ]">Voir plus</button></td>
    </ng-container>

    <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
    <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>

  </table>
  <ul>
    <li *ngFor="let item of [].constructor(totalPages); let i = index">
      <a href="" (click)="setPage(i,$event)"> {{i+1}} </a>
    </li>
  </ul>
</section>
